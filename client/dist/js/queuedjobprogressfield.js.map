{"version":3,"sources":["webpack:///webpack/bootstrap ed475dd976b032c5b423","webpack:///./client/src/bundles/queuedjobprogressfield.js"],"names":["window","jQuery","entwine","$","on","event","data","status","continueSection","removeClass","continueLink","find","addClass","text","attr","hide","show","onmatch","console","log","popover","container","parents","get","placement","link","self","setTimeout","fetchData","getInterval","_super","onunmatch","interval","progress","getJSON","resp","Percentage","changed","Title","Content","css","hasClass","Status","Animated","trigger","html","Messages"],"mappings":"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","file":"js/queuedjobprogressfield.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./client/src/bundles/queuedjobprogressfield.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ed475dd976b032c5b423","window.jQuery.entwine(\"ss\", ($) => {\n    $(\"body\").on(\"queuedjob-finished\", function (event, data) {\n        var status =\n            data && typeof data.status !== \"undefined\" ? data.status : false;\n\n        var continueSection = $(\".continue\").removeClass(\"continue--disabled\");\n\n        var continueLink = continueSection.find(\"a\");\n\n        if (status && status !== \"bg-success\") {\n            continueLink.addClass(\"failed\");\n            continueLink.text(\"Back\");\n\n            if (continueLink.data(\"data-failure-href\")) {\n                continueLink.attr(\n                    \"href\",\n                    continueLink.data(\"data-failure-href\")\n                );\n            }\n\n            $(\".fa-sync\")\n                .removeClass(\"fa-sync fa-spin fa\")\n                .addClass(\"fas fa-times\");\n        } else {\n            continueLink.removeClass(\"failed\");\n            continueLink.text(\"Continue\");\n\n            if (continueLink.data(\"data-success-href\")) {\n                continueLink.attr(\n                    \"href\",\n                    continueLink.data(\"data-success-href\")\n                );\n            }\n\n            // change to a tick.\n            $(\".fa-sync\")\n                .removeClass(\"fa-sync fa-spin fa\")\n                .addClass(\"fas fa-check\");\n        }\n\n        continueSection.find(\"p\").hide();\n    });\n\n    $(\"body\").on(\"queuedjob-resumed\", function (event) {\n        var continueSection = $(\".continue\").addClass(\"continue--disabled\");\n\n        continueSection.find(\"a\").text(\"Please wait..\");\n        continueSection.find(\"p\").show();\n\n        // change to a txt.\n        $(\".fa-check\")\n            .removeClass(\"fas fa-check\")\n            .addClass(\"fa-sync fa-spin fa\");\n    });\n\n    $(\".queuedjob__progress\").entwine({\n        onmatch() {\n            console.log(\"match\");\n            $(this)\n                .find(\".progress-bar\")\n                .popover({\n                    container: $(this).parents(\".field\").get(0),\n                    placement: \"top\",\n                })\n                .popover(\"show\")\n                .on(\"hide.bs.popover\", function () {\n                    return false;\n                });\n\n            $(this)\n                .find(\".bs-popover-bottom\")\n                .removeClass(\"bs-popover-bottom\")\n                .addClass(\"bs-popover-top\");\n\n            var link = $(this).data(\"live\"),\n                self = $(this);\n            console.log(link);\n            if (link) {\n                setTimeout(function () {\n                    self.fetchData();\n                }, self.getInterval());\n            }\n\n            this._super();\n        },\n        onunmatch() {\n            this._super();\n\n            $(this).find(\".progress-bar\").popover(\"dispose\");\n        },\n        getInterval() {\n            var interval = $(this).data(\"interval\");\n\n            if (!interval || interval < 5000) {\n                interval = 5000;\n            }\n\n            return interval;\n        },\n        fetchData() {\n            var self = this;\n            var progress = $(this).find(\".progress-bar\"),\n                link = $(this).data(\"live\");\n\n            $.getJSON(link, function (resp) {\n                if (resp && resp.Percentage) {\n                    var changed =\n                        $(self)\n                            .parents(\".field\")\n                            .find(\".popover-header\")\n                            .text() !== resp.Title ||\n                        $(self)\n                            .parents(\".field\")\n                            .find(\".popover-body\")\n                            .text() !== resp.Content;\n\n                    progress.css(\"width\", resp.Percentage + \"%\");\n\n                    if (!progress.hasClass(resp.Status)) {\n                        progress.removeClass(\n                            \"bg-info bg-success bg-danger bg-warning\"\n                        );\n                        progress.addClass(resp.Status);\n\n                        changed = true;\n                    }\n\n                    if (resp.Animated) {\n                        progress.addClass(\"progress-bar-animated\");\n                    } else {\n                        progress.removeClass(\"progress-bar-animated\");\n\n                        // fire a global window event for listeners\n                        $(\"body\").trigger(\"queuedjob-finished\", [\n                            { status: resp.Status },\n                        ]);\n                    }\n\n                    $(self)\n                        .parents(\".field\")\n                        .find(\".messages\")\n                        .html(resp.Messages);\n\n                    if (changed) {\n                        progress.popover(\"hide\").popover(\"dispose\");\n\n                        $(self)\n                            .parents(\".field\")\n                            .find(\".popover-header\")\n                            .text(resp.Title);\n                        $(self)\n                            .parents(\".field\")\n                            .find(\".popover-body\")\n                            .text(resp.Content);\n                        $(self)\n                            .find(\".progress-bar\")\n                            .attr(\"title\", resp.Title)\n                            .data(\"title\", resp.Title)\n                            .data(\"content\", resp.Content)\n                            .attr(\"data-content\", resp.Content);\n\n                        progress.popover(\"show\");\n                    } else {\n                        progress.popover(\"show\");\n                    }\n\n                    if (resp.Status !== \"bg-success\") {\n                        setTimeout(function () {\n                            self.fetchData();\n                        }, self.getInterval());\n                    }\n                }\n            });\n        },\n    });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/queuedjobprogressfield.js"],"sourceRoot":""}